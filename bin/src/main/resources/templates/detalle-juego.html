<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${juego.titulo}">Detalle</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<div class="detalle-container">

    <div class="detalle-header">
        <img th:src="@{'/img/' + ${juego.imagenUrl}}" class="detalle-img">
        <div>
            <h1 th:text="${juego.titulo}"></h1>
            <p th:text="${juego.descripcion}"></p>
            <h2>S/ <span th:text="${juego.precio}"></span></h2>
        </div>
    </div>

    <!-- Estad√≠sticas -->
    <div class="estadisticas">
        <h3>
            <span th:text="${#numbers.formatDecimal(porcentaje,0,0)}"></span>%
            lo recomienda
        </h3>
        <p th:text="${totalResenas} + ' rese√±as'"></p>

        <div class="barra-aprobacion">
            <div class="barra-fill"
                 th:style="'width:' + ${porcentaje} + '%'">
            </div>
        </div>
    </div>

    <!-- Formulario -->
    <div th:if="${puedeResenar}" class="form-resena">
        <h3>Deja tu rese√±a</h3>

        <form th:action="@{'/juego/' + ${juego.id} + '/resenar'}"
              method="post">

            <label>Puntuaci√≥n:</label>
            <select name="puntuacion">
                <option value="1">1 ‚≠ê</option>
                <option value="2">2 ‚≠ê</option>
                <option value="3">3 ‚≠ê</option>
                <option value="4">4 ‚≠ê</option>
                <option value="5">5 ‚≠ê</option>
            </select>

            <label>¬øRecomiendas?</label>
            <select name="recomendado">
                <option value="true">üëç S√≠</option>
                <option value="false">üëé No</option>
            </select>

            <textarea name="comentario"
                      placeholder="Escribe tu opini√≥n..."
                      required></textarea>

            <button type="submit">Publicar</button>
        </form>
    </div>

    <div class="lista-resenas">
        <h3>Rese√±as</h3>

        <div th:each="r : ${resenas}" class="resena-card">

            <h4 th:text="${r.usuario.nombre}"></h4>

            <p>
                <span th:text="${r.puntuacion}"></span> ‚≠ê -
                <span th:text="${r.recomendado} ? 'Recomendado' : 'No recomendado'"></span>
            </p>

            <p th:text="${r.comentario}"></p>
        </div>
    </div>

</div>

</body>
</html>
